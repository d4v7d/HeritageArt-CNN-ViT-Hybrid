# Test config - 1 epoch dry run  
# Copy of base_config.yaml with epochs=1 for quick testing

data:
  root: "data/artefact"
  image_size: 512
  train_val_split: 0.8
  binary_mode: true
  ignore_index: 255
  num_workers: 4

training:
  batch_size: 2             # Smaller for faster test
  epochs: 1                 # Just 1 epoch for testing
  learning_rate: 0.0003
  weight_decay: 0.00005
  
  loss:
    type: "dice_focal"
    dice_weight: 0.7
    focal_weight: 0.3
    focal_alpha: 0.25
    focal_gamma: 2.0
  
  optimizer: "adamw"
  
  scheduler:
    type: "cosine"
    warmup_epochs: 0        # No warmup for 1 epoch test
    min_lr: 0.0000005
  
  checkpointing:
    save_freq: 1
    save_best: true
    metric: "val_miou"
  
  mixed_precision: false    # Disable for test

# Augmentation
augmentation:
  train:
    horizontal_flip: 0.5
    vertical_flip: 0.5
    rotate_limit: 20
    brightness_limit: 0.25
    contrast_limit: 0.25
    blur_limit: 4
  val:
    enabled: false

# Evaluation metrics
evaluation:
  metrics: ["miou", "mf1", "precision", "recall", "accuracy"]
  per_class_metrics: true
  confusion_matrix: true
  save_visualizations: true
  num_visualizations: 10

# Model config
model:
  name: "convnext_tiny_upernet_test"
  encoder: "convnext_tiny"
  encoder_source: "timm"
  encoder_weights: null     # No pretrained for faster test
  decoder: "upernet"
  classes: 2
  
  upernet:
    ppm_pool_scales: [1, 2, 3, 6]
    fpn_out_channels: 256
    dropout: 0.1

# System
seed: 42
device: "cuda"
num_workers: 2            # For dataloader
