# POC-4: Minimal Training Configuration
# Binary segmentation: Damage (1) vs Clean (0)

model:
  name: "resnet50_unet"
  encoder: "resnet50"
  encoder_weights: "imagenet"
  in_channels: 3
  classes: 2  # Binary: damage vs clean

data:
  root: "data/artefact"
  tile_size: 512
  train_val_split: 0.8
  ignore_index: 255
  
  # Class mapping: 0=Clean, 1-15=Damage, 255=Ignore
  binary_mode: true  # Collapse all damage classes to 1

training:
  batch_size: 4
  epochs: 10
  learning_rate: 0.0001
  weight_decay: 0.0001
  
  # Loss function
  loss:
    type: "dice_focal"
    dice_weight: 0.5
    focal_weight: 0.5
    focal_alpha: 0.25
    focal_gamma: 2.0
  
  # Optimizer
  optimizer: "adamw"
  
  # Scheduler
  scheduler:
    type: "cosine"
    warmup_epochs: 2
    min_lr: 0.000001
  
  # Checkpointing
  save_freq: 5  # Save every N epochs
  best_metric: "val_miou"  # Metric to track for best model

augmentation:
  train:
    horizontal_flip: 0.5
    vertical_flip: 0.5
    rotate_limit: 15
    brightness_limit: 0.2
    contrast_limit: 0.2
    blur_limit: 3
  
  val:
    # No augmentation for validation
    pass

evaluation:
  metrics:
    - "miou"
    - "f1"
    - "precision"
    - "recall"
    - "accuracy"
  
  visualize: true
  max_visualizations: 10

paths:
  checkpoints: "logs/checkpoints"
  logs: "logs/training"
  visualizations: "logs/visualizations"
  metrics: "logs/metrics"

seed: 42
device: "cuda"
num_workers: 4
